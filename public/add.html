<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="style.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="Clapper.png" />
    <title>Movie DB</title>
  </head>
  <body>
    <h1>Add Movie</h1>

    <div class="form-container">
      <label>Title:</label>
      <input type="text" id="title" />

      <label>Release Date:</label>
      <input type="date" id="release_date" />

      <label>Runtime (minutes):</label>
      <input type="number" id="run_time" />

      <label>Rating (0 - 100):</label>
      <input type="number" id="rating" min="0" max="100" />

      <label>Category:</label>
      <input type="text" id="category" />

      <label>Synopsis:</label>
      <textarea id="synopsis"></textarea>

      <button onclick="submitMovie()">Add Movie</button>
    </div>

    <script>
      async function submitMovie() {
        // Collect data from inputs
        const movie = {
          title: document.getElementById("title").value,
          release_date: document.getElementById("release_date").value,
          synopsis: document.getElementById("synopsis").value,
          rating: document.getElementById("rating").value,
          run_time: document.getElementById("run_time").value,
          category: document.getElementById("category").value,
        };

        // Send to server (Node + SQLite)
        const movieRes = await fetch("/api/movie", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(movie),
        });

        const movieData = await movieRes.json();

        alert("Movie added with ID: " + movieData.movie_id);
      }
    </script>
  </body>
</html>
